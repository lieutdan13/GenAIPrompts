{
  "name": "Ebook Generator",
  "nodes": [
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5",
          "mode": "list",
          "cachedResultName": "GPT-5"
        },
        "messages": {
          "values": [
            {
              "content": "You are a veteran market-research copywriter who uncovers deep customer pains and frustrations with clear, bullet-point precision.",
              "role": "system"
            },
            {
              "content": "=List the 10 biggest pains and frustrations people have around â€œ{{ $json.keyword }}â€.  \nReturn each as a concise bullet.\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1088,
        -1296
      ],
      "id": "fc0c7935-5d71-4079-93f1-a5ee4b839859",
      "name": "Brainstorming Pains",
      "credentials": {
        "openAiApi": {
          "id": "KDgyP2XuXvC5PlRq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5",
          "mode": "list",
          "cachedResultName": "GPT-5"
        },
        "messages": {
          "values": [
            {
              "content": "You are a seasoned problem-solving strategist who turns customer pains into clear, actionable solutions.",
              "role": "system"
            },
            {
              "content": "=Below are the top pains and frustrations people face around â€œ{{ $('Map Chat Input').item.json.keyword }}â€:\n\n{{ $json.message.content }}\n\nFor each pain, write one concise solution that directly addresses it. \n\nReturn the solutions as a numbered list, keeping each item to one sentence.\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1360,
        -1296
      ],
      "id": "77d7835a-ef4f-42a0-8d55-03efc357b810",
      "name": "Generate Solutions",
      "credentials": {
        "openAiApi": {
          "id": "KDgyP2XuXvC5PlRq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "public": true,
        "initialMessages": "Hi there! ðŸ‘‹\nI'm a pain point ebook generator. How can I assist you today?",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        592,
        -1488
      ],
      "id": "32003e01-e81e-4b3e-bc79-cfb1ae6abadd",
      "name": "When chat message received",
      "webhookId": "4ffcb028-c596-4a87-913f-bb6e643a5f5a",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5",
          "mode": "list",
          "cachedResultName": "GPT-5"
        },
        "messages": {
          "values": [
            {
              "content": "You are an expert direct-response strategist who crafts irresistible offers using Alex Hormoziâ€™s $100M Offers framework.",
              "role": "system"
            },
            {
              "content": "=Topic / niche: â€œ{{ $('Map Chat Input').item.json.keyword }}â€\n\nTop customer pains:\n{{ $('Brainstorming Pains').item.json.message.content }}\n\nYour task:\n1. Apply Alex Hormoziâ€™s $100M Offers framework (Dream Outcome, Perceived Likelihood, Time Delay, Effort & Sacrifice).\n2. Craft a single, compelling offer that eliminates those pains.\n\nReturn in this exact format:\n\nâ€¢ **Offer Title:** â€¦\nâ€¢ **Dream Outcome:** â€¦\nâ€¢ **Perceived Likelihood:** â€¦\nâ€¢ **Time Delay:** â€¦\nâ€¢ **Effort & Sacrifice:** â€¦\nâ€¢ **Key Features & Bonuses:** (3â€“5 bullets)\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1632,
        -1296
      ],
      "id": "0843ea26-2c42-4a84-8142-1e164e078913",
      "name": "$100M Offer",
      "credentials": {
        "openAiApi": {
          "id": "KDgyP2XuXvC5PlRq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5",
          "mode": "list",
          "cachedResultName": "GPT-5"
        },
        "messages": {
          "values": [
            {
              "content": "You are a seasoned marketing copywriter who crafts scroll-stopping ebook titles that promise a clear, tangible result.\n",
              "role": "system"
            },
            {
              "content": "=Hereâ€™s the offer weâ€™ll be selling:\n\n{{ $json.message.content }}\n\n1. Propose **three punchy ebook titles** (each under 12 words) that convey the core outcome and spark curiosity.  \n2. Evaluate each title on clarity, emotional pull, specificity, and benefit.  \n3. Pick the single best title and explainâ€”in one concise sentenceâ€”why it wins.\n\nReturn your answer as strict JSON with exactly these keys:\n{\n  \"titles\": [ \"Title 1\", \"Title 2\", \"Title 3\" ],\n  \"selectedTitle\": \"The winner\",\n  \"rationale\": \"Why this one converts best\"\n}\n"
            }
          ]
        },
        "jsonOutput": "={{$json.selectedTitle}}      // the winner\n{{$json.titles[0]}}          // first alternate\n{{$json.rationale}}          // one-sentence reason\n",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1040,
        -816
      ],
      "id": "4006ebb3-815b-4554-ba15-261f648f6bad",
      "name": "Create Offer Title",
      "credentials": {
        "openAiApi": {
          "id": "KDgyP2XuXvC5PlRq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5",
          "mode": "list",
          "cachedResultName": "GPT-5"
        },
        "messages": {
          "values": [
            {
              "content": "You are an expert ebook outline strategist and educational content architect. You design structures that flow logically, teach clearly, and drive action.\n",
              "role": "system"
            },
            {
              "content": "=Weâ€™re writing an ebook titled â€œ{{ $json.message.content.selectedTitle }}â€.\n\nCreate a detailed outline that includes:\n\n1. **Introduction**  \n   â€¢ Hook readers with the core promise  \n   â€¢ Explain why this book matters for the {{ $('Map Chat Input').item.json.keyword }} niche  \n\n2. **Section 1 â€“ Section 6**  \n   â€¢ Give each section a bold, benefit-driven heading  \n   â€¢ Under every heading list 3â€“5 bullet points covering the sub-topics or steps  \n   â€¢ The finished book will expand each section to roughly 300â€“500 words  \n\n3. **Conclusion & 3-Step Action Plan**  \n   â€¢ Summarize key lessons  \n   â€¢ Provide three specific next steps readers can implement immediately  \n\nReturn the outline as a numbered list with sub-bullets under each heading.\n"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1648,
        -816
      ],
      "id": "f31042a3-6069-475c-b23d-0ffbaddda9a1",
      "name": "Build Outline",
      "credentials": {
        "openAiApi": {
          "id": "KDgyP2XuXvC5PlRq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5",
          "mode": "list",
          "cachedResultName": "GPT-5"
        },
        "messages": {
          "values": [
            {
              "content": "You are a veteran nonfiction ghostwriter who turns outlines into engaging, easy-to-read ebooks at a 6th-grade reading level while still sounding professional and motivating.\n",
              "role": "system"
            },
            {
              "content": "=Title: \"{{ $('Create Offer Title').item.json.message.content.selectedTitle }}\"\n\nTarget niche: \"{{ $('Map Chat Input').item.json.keyword }}\"\n\nBelow is the approved outline object:\n\n{{ $('Build Outline').item.json.message.content }}\n\nWrite the full ebook using that structure:\n\nâ€¢ Keep every heading exactly as listed.  \nâ€¢ For each section, expand its bullet points into 300â€“500 words of clear prose.  \nâ€¢ Tone: friendly, confident, action-oriented (6th-grade reading level).  \nâ€¢ Use short paragraphs and add the occasional bold phrase for emphasis.  \nâ€¢ After the Conclusion, include the 3-step action plan as a numbered list.  \n\n\nReturn your answer as strict JSON with exactly these keys:\n{\n  \"title\": \"Title\",\n  \"ebookMarkdown\": \"The entire outline in markdown format, including the title as a header\"\n}\n"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1040,
        -512
      ],
      "id": "a2d66ac7-8053-4364-a790-33ae1bf84134",
      "name": "Create $100M Product",
      "credentials": {
        "openAiApi": {
          "id": "KDgyP2XuXvC5PlRq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "resource": "image",
        "model": "gpt-image-1",
        "prompt": "=You are an award-winning creative director and ebook cover designer. Your job is to turn any topic, offer, and audience into a single, scroll-stopping image.\n\nWeâ€™re publishing an ebook titled â€œ{{ $('Create Offer Title').item.json.message.content.selectedTitle }}â€ for people interested in â€œ{{ $('Map Chat Input').item.json.keyword }}.â€\n\n1. Infer the primary demographic most likely to buy (age range, gender, profession, vibe).\n2. Craft a detailed prompt for GPT Image 1 that includes:\n- A central figure, real person or scene representing that demographic.\n- Visual metaphors or icons tied to the core offer (e.g., toolbox for productivity, rocket for scaling, plant sprouting for growth)  \n- Bold, legible typography for the title  \n- High-contrast palette â€” black & white plus **one accent color, choose color based on high converting color therapy**  \n- Modern, minimalist layout  \n- **Portrait orientation at 1:1.4 aspect ratio** (e.g., 1400 Ã— 1000 px)",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1936,
        -816
      ],
      "id": "a9010436-183d-4291-9403-ce0e46a68acf",
      "name": "Generate Image Cover",
      "alwaysOutputData": false,
      "retryOnFail": true,
      "waitBetweenTries": 2000,
      "notesInFlow": false,
      "credentials": {
        "openAiApi": {
          "id": "KDgyP2XuXvC5PlRq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-5",
          "mode": "list",
          "cachedResultName": "GPT-5"
        },
        "messages": {
          "values": [
            {
              "content": "You are a product strategist who creates high-perceived-value bonuses and upsells.",
              "role": "system"
            },
            {
              "content": "=Title: â€œ{{ $('Create Offer Title').first().json.message.content.selectedTitle }}â€\nTopic: â€œ{{ $('Map Chat Input').first().json.keyword }}â€\nOffer summary:\n{{ $('$100M Offer').first().json.message.content }}\n\n1. Propose 5 high-value bonuses. For each:\n- name\n- format (template, checklist, etc.)\n- benefit (under 20 words)\n\n2. Suggest a paid One-Time Offer (price: $97â€“$297) that amplifies results. Include:\n- name\n- description\n- deliverables (3â€“5 bullets)\n\nReturn JSON:\n\n{\n  \"bonuses\": [ { \"name\": \"\", \"format\": \"\", \"benefit\": \"\" }, â€¦ ],\n  \"oto\": {\n    \"name\": \"\", \"price\": 97, \"description\": \"\", \"deliverables\": []\n  },\n  \"workbookOutline\": [\n    { \"section\": \"\", \"description\": \"\" }\n  ]\n}\n"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        1040,
        -144
      ],
      "id": "c6203699-395a-4001-a3aa-214043cb1763",
      "name": "Value Enhancer",
      "credentials": {
        "openAiApi": {
          "id": "KDgyP2XuXvC5PlRq",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "/**\n * Build HTML (Value Enhancer) for DOCX conversion.\n * Returns binary HTML for the next \"Binary Data1\" node.\n */\n\n// 1) Grab and parse VE JSON from the correct path\nconst rawOpenAiOutput = $node[\"Value Enhancer\"].json;\nlet veData = {}; // This will hold the object {bonuses, workbookOutline, oto}\n\nif (rawOpenAiOutput && rawOpenAiOutput.message && rawOpenAiOutput.message.content) {\n    const contentField = rawOpenAiOutput.message.content;\n    if (typeof contentField === 'string' && contentField.trim().startsWith('{')) {\n        try {\n            veData = JSON.parse(contentField);\n        } catch (e) {\n            console.log(\"N8N_LOG_ERROR (Build HTML Value Enhancer): Failed to parse AI content as JSON. Content:\", contentField, \"Error:\", e);\n            // veData remains {}\n        }\n    } else if (typeof contentField === 'object' && contentField !== null) {\n        veData = contentField; // It's already an object\n    } else {\n        console.log(\"N8N_LOG_ERROR (Build HTML Value Enhancer): AI content is not a string or object. Content:\", contentField);\n        // veData remains {}\n    }\n} else {\n    console.log(\"N8N_LOG_ERROR (Build HTML Value Enhancer): Expected path .message.content not found in Value Enhancer output. Raw Output:\", JSON.stringify(rawOpenAiOutput));\n    // veData remains {}\n}\n\n// 2) Safe-default arrays/objects using the extracted veData\nconst bonuses  = Array.isArray(veData.bonuses) ? veData.bonuses : [];\nconst workbook = Array.isArray(veData.workbookOutline) ? veData.workbookOutline : []; // Check AI prompt for exact key name\nconst oto      = (veData.oto && typeof veData.oto === 'object') ? veData.oto : { name:\"\", price:\"\", description:\"\", deliverables:[] };\n\n// 3) Helpers â†’ build inner HTML lists\nconst listItems = (arr, templateFn) => {\n  if (!Array.isArray(arr)) return '';\n  return arr.map(item => item ? templateFn(item) : '').join(\"\"); // Added check for item\n};\n\nconst bonusHtml = `<ul>${listItems(bonuses, b =>\n  `<li><strong>${b.name || \"N/A\"}</strong> (${b.format || \"N/A\"}) â€“ ${b.benefit || \"N/A\"}</li>`\n)}</ul>`;\n\nconst workbookHtml = `<ol>${listItems(workbook, w =>\n  `<li><strong>${w.section || \"N/A\"}</strong>: ${w.description || \"N/A\"}</li>`\n)}</ol>`;\n\n// Ensure oto.deliverables is an array before mapping\nconst otoDeliverables = Array.isArray(oto.deliverables) ? oto.deliverables : [];\nconst otoHtml = `\n  <h2>One-Time Offer â€” ${oto.name || \"N/A\"} ($${oto.price || \"N/A\"})</h2>\n  <p>${oto.description || \"N/A\"}</p>\n  <ul>${listItems(otoDeliverables, d => `<li>${d || \"N/A\"}</li>`)}</ul>\n`;\n\n// 4) Assemble full HTML document with DOCX-friendly styles\nconst fullHtml = `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\"/>\n  <title>Value Enhancer</title>\n  <style>\n    /* Styles optimized for HTML to DOCX conversion */\n    body {\n      font-family: Arial, Helvetica, sans-serif;\n      font-size: 12pt; /* Approx 16px - standard for documents */\n      line-height: 1.4;\n      color: #000000;\n      margin: 2cm 1.5cm; /* Page Margins: Top/Bottom Left/Right. Adjust as needed. */\n    }\n    h1 {\n      font-size: 18pt; /* Larger for main title */\n      font-weight: bold;\n      color: #000000;\n      margin-top: 0; /* Main title often at the very top */\n      margin-bottom: 0.8em;\n      text-align: center; /* Optional: Center main title */\n    }\n    h2 {\n      font-size: 14pt; /* Sub-headings slightly smaller */\n      font-weight: bold;\n      color: #000000;\n      margin-top: 1.2em;\n      margin-bottom: 0.4em;\n      page-break-after: avoid;\n    }\n    p {\n      margin-top: 0;\n      margin-bottom: 0.6em;\n    }\n    ul, ol {\n      margin-top: 0.2em;\n      margin-bottom: 0.8em;\n      padding-left: 1.5em; /* Standard list indentation */\n    }\n    li {\n      margin-bottom: 0.2em;\n    }\n    strong {\n      font-weight: bold;\n    }\n  </style>\n</head>\n<body>\n  <h1>Bonus Vault &amp; Value Enhancer</h1>\n  \n  <h2>Bonus Bundle</h2>\n  ${bonusHtml}\n  \n  <h2>Workbook Outline</h2>\n  ${workbookHtml}\n  \n  ${otoHtml}\n</body>\n</html>`;\n\n// 5) Return as an object with a binary property 'html',\n//    which itself is an object containing the data Buffer.\n//    This is what \"Binary Data1\" node expects as input.\nreturn [{\n  json: {}, // Keep json part minimal or add useful metadata if needed\n  binary: {\n    html: { // This is the binary property name \"Binary Data1\" will look for\n      data: Buffer.from(fullHtml, \"utf8\"), // The HTML content as a Buffer\n      mimeType: \"text/html\",\n      fileName: $node[\"Slugify Title\"].json.slug + \"_value-enhancer.html\"\n    }\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1328,
        -144
      ],
      "id": "44262c8b-2fff-4752-997c-f8238ad06a00",
      "name": "Build HTML (Value Enhancer)"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8abb96ad-9f7e-4ad6-88e2-b4a96d475db1",
              "name": "text",
              "value": "=âœ… Your product is ready!\n\n1. [Solution eBook (DOCX) âžœ]({{ $('Upload ebook as Docx').first().json.documentUrl }})\n\n2. [Value Enhancer (DOCX) âžœ]({{ $('Upload enhancer').first().json.webViewLink }})\n\n3. [Cover Image âžœ]({{ $('Upload cover image').first().json.webViewLink }})\n\nEdit, Upload, Sell!\n",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2208,
        -144
      ],
      "id": "a08e5545-3edf-4a67-9494-5e547d4e148f",
      "name": "Files Ready!",
      "executeOnce": false
    },
    {
      "parameters": {
        "preBuiltAgentsCalloutHttpRequest": "",
        "httpVariantWarning": "",
        "curlImport": "",
        "method": "POST",
        "": "",
        "url": "https://v2.convertapi.com/convert/html/to/docx",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "convertApi",
        "provideSslCertificates": false,
        "sendQuery": false,
        "sendHeaders": false,
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "File",
              "inputDataFieldName": "data"
            },
            {
              "parameterType": "formData",
              "name": "StoreFile",
              "value": "false"
            }
          ]
        },
        "options": {},
        "infoMessage": ""
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1664,
        -144
      ],
      "id": "e8295b89-1d79-4419-9169-418c422178a7",
      "name": "Convert Value to DOCX",
      "extendsCredential": "convertApi",
      "credentials": {
        "convertApi": {
          "id": "qu9aLGk9znybZDIH",
          "name": "ConvertAPI account"
        }
      }
    },
    {
      "parameters": {
        "content": "",
        "height": 464,
        "width": 1348,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        576,
        -1328
      ],
      "typeVersion": 1,
      "id": "91bd4b93-8322-4447-adb8-7a609346fb6c",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "# â­ï¸ How to Set Up to Run on Your Account\n**Author:** Don Lyons from [Effortless Digital](https://www.instagram.com/effortlessdigitaldon/)  \n\nThis quick-start guide shows you how to set up your account to work with OpenAI for images and content, and ConvertAPI to get the final output in .docx format.\n\n## ðŸ”³ Step 1: Set Up OpenAI for Content & Image Generation\n**Cost Note:** OpenAI's API will cost around 0.25 for each completed PDF product, Bonus Idea doc and Ecover Image. _Definitely beats 2hrs doing it yourself_\n\n1. Go to [OpenAI API Platform](https://platform.openai.com/api-keys)  \n2. Create an account (if you donâ€™t have one).  \n3. Generate an API key.  \n4. Create a credential using that key.  \n**Note:** If you use the 4o image generation model, OpenAI will ask you to verify your identity. They do this to prevent misuse.\n\n## ðŸ”³ Step 2: Set Up ConvertAPI (for DOCX Conversion)\n1.  **Go to:** [ConvertAPI Website](https://www.convertapi.com/)\n2.  **Sign Up:** Create a free account.\n3.  **Find API Secret:** After signing up, navigate to \"Authentication -> Secret Key\". You should find your \"API Secret\" (it starts with secret).\n4.  **Add to n8n:** In n8n, go to \"Credentials\" > \"New\". Search for \"ConvertAPI\" and create a new credential. Paste your API Secret into the appropriate field. Give it a name.\n\n**Note:** ConvertAPI's free tier limit is 250 runs. For extensive use, you might need a paid plan. This workflow uses it to convert HTML to DOCX. You get 250 runs for free.\n\n## ðŸ”³ Step 3: Set Up Cloudinary (Image Uploading Tool)\n**Cost Note:** FREE (free plan lets you upload 1,000s of images each month)\n\n### 1. Create Your Free Account\n- Go to: https://cloudinary.com/users/register_free\n- Sign up for a free account\n\n### 2. Get Your Cloud Name\n- Log into your Cloudinary dashboard\n- Find your **Cloud Name** at the top of the dashboard\n- **Copy this name** - you'll need it in step 5\n\n### 3. Create an Upload Preset\n- Click the **Settings** gear icon (bottom left)\n- Navigate to the **Upload** tab\n- Click **\"+ Add upload preset\"**\n- Configure the preset:\n  - Change **Signing Mode** from \"Signed\" to **\"Unsigned\"**\n  - Set **Preset name** to: `aiasset_preset`\n  - Leave all other settings as default\n  - Click **Save**\n\n### 4. Update the n8n Workflow\nIn your n8n workflow, find the **\"Get Img Link\"** node and:\n- Replace `YOUR_CLOUD_NAME` in the URL with your actual Cloud Name from step 2\n- The URL should look like:\nhttps://api.cloudinary.com/v1_1/doryejrxy/image/upload\nBut with YOUR cloud name instead of \"doodyyrxy\"\n\n### 5. Test Your Setup\n- The workflow is now ready to upload images to your Cloudinary account\n- Each uploaded image will get a unique URL that the workflow uses for the ebook cover\n\n**Note:** Make sure your upload preset name is exactly `aiasset_preset` or the workflow won't work!",
        "height": 1700,
        "width": 540,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        -1504
      ],
      "typeVersion": 1,
      "id": "feb4fdd7-d63e-4adf-b60b-a01aa3b0a1de",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.cloudinary.com/v1_1/dhicww4gk/image/upload",
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "file",
              "inputDataFieldName": "data"
            },
            {
              "name": "upload_preset",
              "value": "aiasset_preset"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2112,
        -672
      ],
      "id": "40718b93-8d97-4995-922e-1ce5994caf5a",
      "name": "Get Img Link"
    },
    {
      "parameters": {
        "jsCode": "// Revised Code for \"Binary Data1\" Node\n\n// Check if the basic path to the data exists\nif (!items[0].binary || !items[0].binary.html || !items[0].binary.html.data) {\n  console.log(\"N8N_LOG_DEBUG: Unexpected input structure in Binary Data1. Item:\", JSON.stringify(items[0]));\n  throw new Error(\"Input from 'Build HTML (Value Enhancer)' did not provide data at items[0].binary.html.data as expected.\");\n}\n\nlet inputHtmlContent = items[0].binary.html.data;\nlet inputHtmlBuffer;\n\n// Try to create a buffer intelligently\nif (inputHtmlContent instanceof Buffer) {\n  inputHtmlBuffer = inputHtmlContent;\n} else if (typeof inputHtmlContent === 'string') {\n  inputHtmlBuffer = Buffer.from(inputHtmlContent, 'utf8');\n} else if (typeof inputHtmlContent === 'object' && inputHtmlContent.type === 'Buffer' && Array.isArray(inputHtmlContent.data)) {\n  // Sometimes Buffers get serialized to objects like { type: \"Buffer\", data: [...] }\n  inputHtmlBuffer = Buffer.from(inputHtmlContent.data);\n} else {\n  console.log(\"N8N_LOG_DEBUG: Data at items[0].binary.html.data is not a Buffer, string, or recognized Buffer object. Actual type:\", typeof inputHtmlContent, \"Value:\", JSON.stringify(inputHtmlContent));\n  throw new Error(\"Data at items[0].binary.html.data from 'Build HTML (Value Enhancer)' is not in a recognized format (Buffer, String, or serialized Buffer object).\");\n}\n\nconst inputMimeType = items[0].binary.html.mimeType || 'text/html';\nconst inputFileName = items[0].binary.html.fileName || 'value-enhancer.html';\n\nitems[0].binary.data = {\n  data: inputHtmlBuffer.toString('base64'),\n  mimeType: inputMimeType,\n  fileName: inputFileName\n};\n\ndelete items[0].binary.html;\n\nreturn items;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1504,
        -144
      ],
      "id": "532feb37-2c30-4a6e-8636-988c7edf723d",
      "name": "Binary Data (Value Enhancer)"
    },
    {
      "parameters": {
        "mode": "runOnceForEachItem",
        "jsCode": "function stringToSlug(str) {\n  return str\n    .toLowerCase()                  // convert to lowercase\n    .trim()                         // remove leading/trailing spaces\n    .replace(/\\:\\s+/g, '_')          // replace colon plus space with underscore\n    .replace(/[^a-z0-9\\s-_]/g, '')   // remove special characters\n    .replace(/\\s+/g, '-')           // replace spaces with dashes\n    .replace(/-+/g, '-');           // collapse multiple dashes\n}\nconst slug = stringToSlug($json.message.content.selectedTitle);\nreturn {\n  slug: slug,\n  cover_image_slug: slug + \"_cover\",\n  enhancement_slug: slug + \"_enhancement\"\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1328,
        -816
      ],
      "id": "a82f959a-3904-4c0d-8a16-6c0204440439",
      "name": "Slugify Title"
    },
    {
      "parameters": {
        "name": "={{ $data.Files.last().FileName }}",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "={{ $('Create folder').first().json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        2032,
        -144
      ],
      "id": "2abe6ec2-7ec3-4c36-a51f-ba472d61afda",
      "name": "Upload enhancer",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "qWygDbp8o8iGWlrc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "name": "={{ $('Slugify Title').first().json.cover_image_slug }}.{{ $('Generate Image Cover').item.json.fileExtension }}",
        "driveId": {
          "__rl": true,
          "value": "My Drive",
          "mode": "list",
          "cachedResultName": "My Drive",
          "cachedResultUrl": "https://drive.google.com/drive/my-drive"
        },
        "folderId": {
          "__rl": true,
          "value": "={{ $('Create folder').item.json.id }}",
          "mode": "id"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        2112,
        -816
      ],
      "id": "548ed3b2-a4b3-4c68-8274-f47dc01bb02a",
      "name": "Upload cover image",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "qWygDbp8o8iGWlrc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "resource": "folder",
        "name": "={{ $json.slug }}",
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "1RqBjIPuKKA89Vgcs25_HbnrmQe5fyPog",
          "mode": "list",
          "cachedResultName": "DSD-ebooks",
          "cachedResultUrl": "https://drive.google.com/drive/folders/1RqBjIPuKKA89Vgcs25_HbnrmQe5fyPog"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleDrive",
      "typeVersion": 3,
      "position": [
        1488,
        -816
      ],
      "id": "99e3b9b8-ea3a-4775-b39f-295ca4871803",
      "name": "Create folder",
      "credentials": {
        "googleDriveOAuth2Api": {
          "id": "qWygDbp8o8iGWlrc",
          "name": "Google Drive account"
        }
      }
    },
    {
      "parameters": {
        "content": "## | PHASE 1: AI-POWERED IDEATION & STRATEGIC OFFER DESIGN\n\nPurpose: Turn a keyword into a fully-fledged digital asset! In this phase, a series of specialized AI agents collaborate:\n\n1. AI uncovers critical **customer pain points** related to your idea.\n2. Next, another AI crafts targeted **solutions** for each pain.\n3. Finally, a strategic AI applies proven marketing frameworks (like the '$100M Offer') to forge these insights into an **irresistible core offer**, complete with a compelling title, dream outcome, and unique selling propositions. \n\n**This isn't just brainstorming; it's AI-driven strategy in action!**",
        "height": 432,
        "width": 384,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        592,
        -1312
      ],
      "typeVersion": 1,
      "id": "68719efb-3854-4b34-a747-169822343ae6",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c6285251-90c9-49c8-86d9-3f701d956b0d",
              "name": "keyword",
              "value": "={{ $json.chatInput }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        752,
        -1488
      ],
      "id": "182b3751-97ec-4843-bd9a-e412fa164434",
      "name": "Map Chat Input"
    },
    {
      "parameters": {
        "content": "",
        "height": 624,
        "width": 1972,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        576,
        -832
      ],
      "typeVersion": 1,
      "id": "7511db06-dc87-408d-b90e-96e253ce3287",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "## | PHASE 2: DIGITAL ASSET CREATION\n\nPurpose: Starts AI content creation! This phase takes the strategic offer and automatically produces a **high-value complete ebook with a custom-designed cover**:\n\n1. An AI copywriter generates **captivating ebook titles** and selects the optimal one.\n2. An AI architect builds a **comprehensive ebook outline**.\n3. The all-new GPT-5 Image AI designs a unique, **professional ebook cover image** based on the title and topic.\n4. Then, an AI ghostwriter drafts the **entire ebook content** in engaging, easy-to-read format, meticulously following the outline. \n\n_Making raw ideas become a tangible asset!_",
        "height": 432,
        "width": 384,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        592,
        -816
      ],
      "typeVersion": 1,
      "id": "da09d0df-98a5-4845-82da-25671ea051bc",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "",
        "height": 416,
        "width": 1968,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        576,
        -176
      ],
      "typeVersion": 1,
      "id": "02895b80-1f0c-4ec5-a07e-0aa7c5614ca6",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## | PHASE 3: VALUE STACKING & FINAL ASSET DELIVERY\n\nPurpose: **Maximizing value is key!** Here, an AI strategist generates a 'Value Enhancer' package â€“ creating compelling bonuses, a one-time-offer, and a workbook outline to complement your main product.\n\nThe grand finale: Both your main Ebook DOCX and the Value Enhancer DOCX are neatly packaged with their download links into a final message, ready to be sent back to you in the chat. \n\nAll this from a single keyword to two complete, ready-to-use digital products.\n\n**All orchestrated by AI and automation!**",
        "height": 384,
        "width": 384,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        592,
        -160
      ],
      "typeVersion": 1,
      "id": "dff41b45-02a4-4d8d-9ea1-f0dbbb43c4f0",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "jsCode": "/**\n * Turn the HTML string coming from Build HTML into a binary\n * property called  data  (base-64) so the Drive Upload node\n * can accept it.\n */\n\nconst file = $input.first().json.Files.pop();\n\nitems[0].binary = {\n  data: {\n    data: file.FileData,\n    mimeType: \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n    fileName: file.FileName\n  }\n};\n\nreturn items;\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1840,
        -144
      ],
      "id": "aac163ab-62ad-4dfc-b95a-539afe9ce609",
      "name": "Binary Data (enhancer)"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        2368,
        -736
      ],
      "id": "4dded790-bf14-4e49-a18b-d2d74d44b595",
      "name": "Merge"
    },
    {
      "parameters": {
        "content": "## TODO\n* Determine the need for image link from Cloudinary and remove\n* Can the conversion from HTML to DOCX occur in code?\n* Can Markdown be converted directly to DOCX?",
        "height": 400,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2576,
        -832
      ],
      "typeVersion": 1,
      "id": "5f000aad-8117-48b8-aeb5-07cb04e3f834",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "driveId": {
          "__rl": true,
          "mode": "list",
          "value": "My Drive"
        },
        "folderId": {
          "__rl": true,
          "value": "={{ $('Create folder').first().json.id }}",
          "mode": "id"
        },
        "documentTitle": "={{ $('Slugify Title').first().json.slug }}-from-md.docx",
        "markdownInput": "={{ $json.message.content.ebookMarkdown }}",
        "additionalOptions": {}
      },
      "type": "n8n-nodes-md-to-docs.markdownToGoogleDocs",
      "typeVersion": 1,
      "position": [
        1344,
        -512
      ],
      "id": "28309468-9ff2-44d0-bd4e-05cf51d5419e",
      "name": "Upload ebook as Docx",
      "credentials": {
        "googleDocsOAuth2Api": {
          "id": "Srz2lLfBBj2CTrHT",
          "name": "Google Docs account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Brainstorming Pains": {
      "main": [
        [
          {
            "node": "Generate Solutions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Solutions": {
      "main": [
        [
          {
            "node": "$100M Offer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When chat message received": {
      "main": [
        [
          {
            "node": "Map Chat Input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "$100M Offer": {
      "main": [
        [
          {
            "node": "Create Offer Title",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create Offer Title": {
      "main": [
        [
          {
            "node": "Slugify Title",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Build Outline": {
      "main": [
        [
          {
            "node": "Generate Image Cover",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create $100M Product": {
      "main": [
        [
          {
            "node": "Upload ebook as Docx",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Image Cover": {
      "main": [
        [
          {
            "node": "Upload cover image",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get Img Link",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Value Enhancer": {
      "main": [
        [
          {
            "node": "Build HTML (Value Enhancer)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Build HTML (Value Enhancer)": {
      "main": [
        [
          {
            "node": "Binary Data (Value Enhancer)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Convert Value to DOCX": {
      "main": [
        [
          {
            "node": "Binary Data (enhancer)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get Img Link": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Binary Data (Value Enhancer)": {
      "main": [
        [
          {
            "node": "Convert Value to DOCX",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Slugify Title": {
      "main": [
        [
          {
            "node": "Create folder",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Files Ready!": {
      "main": [
        []
      ]
    },
    "Upload enhancer": {
      "main": [
        [
          {
            "node": "Files Ready!",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload cover image": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Create folder": {
      "main": [
        [
          {
            "node": "Build Outline",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Map Chat Input": {
      "main": [
        [
          {
            "node": "Brainstorming Pains",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Binary Data (enhancer)": {
      "main": [
        [
          {
            "node": "Upload enhancer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Create $100M Product",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Upload ebook as Docx": {
      "main": [
        [
          {
            "node": "Value Enhancer",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "versionId": "569deb10-335e-4b1b-b689-bb563cc2281a",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "6910c6c2fc8c063d5c1ed14d7a7b2e9404e402a221682ba5e944d64a25bc5aa4"
  },
  "id": "21viw58JZ3up3PWo",
  "tags": [
    {
      "createdAt": "2025-09-03T02:42:25.128Z",
      "updatedAt": "2025-09-03T02:42:25.128Z",
      "id": "nC9yhGiCMMD43yvh",
      "name": "Shared"
    }
  ]
}